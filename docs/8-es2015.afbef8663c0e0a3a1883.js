(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"8jsn":function(e,t,s){"use strict";s.r(t),s.d(t,"AddTaskModule",(function(){return N}));var a=s("ofXK"),n=s("3Pt+"),c=s("tyNb"),r=s("yPpY"),l=s("16ox");class i{constructor(){this.selectedProject=new r.a("",!1,"","",new l.a("","","",""),"",""),this.setParent=!1,this.selectedParentTask=new d,this.selectedEmployee=new l.a("","","",""),this.status=1}}class d{}var o=s("fXoL"),b=s("sYmb"),u=s("sAgM"),h=s("o4Rc"),k=s("JqCM"),f=s("hzby");const p=["taskForm"];function m(e,t){1&e&&(o.Tb(0,"div"),o.Cc(1,"Project is required"),o.Sb())}function g(e,t){if(1&e&&(o.Tb(0,"div",44),o.Ac(1,m,2,0,"div",45),o.Sb()),2&e){o.dc();const e=o.sc(9);o.Bb(1),o.jc("ngIf",e.errors.required)}}function S(e,t){1&e&&(o.Tb(0,"div"),o.Cc(1,"Task Name is required"),o.Sb())}function T(e,t){if(1&e&&(o.Tb(0,"div",44),o.Ac(1,S,2,0,"div",45),o.Tb(2,"div",46),o.Cc(3,"Task Name is required (minimum 2 characters)"),o.Sb(),o.Sb()),2&e){o.dc();const e=o.sc(22);o.Bb(1),o.jc("ngIf",e.errors.required),o.Bb(1),o.jc("hidden",!e.hasError("minlength"))}}function M(e,t){1&e&&(o.Tb(0,"div"),o.Cc(1,"Parent Task is required"),o.Sb())}function v(e,t){if(1&e&&(o.Tb(0,"div",44),o.Ac(1,M,2,0,"div",45),o.Sb()),2&e){o.dc();const e=o.sc(45);o.Bb(1),o.jc("ngIf",e.errors.required)}}function P(e,t){if(1&e){const e=o.Ub();o.Tb(0,"button",47),o.bc("click",(function(){return o.uc(e),o.dc().clearParentTask()})),o.Cc(1),o.ec(2,"translate"),o.Sb()}if(2&e){const e=o.dc();o.jc("disabled",e.taskModal.setParent),o.Bb(1),o.Ec("",o.fc(2,2,"btnClear")," ")}}function y(e,t){1&e&&(o.Tb(0,"div"),o.Cc(1,"Start Date is required"),o.Sb())}function j(e,t){if(1&e&&(o.Tb(0,"div",44),o.Ac(1,y,2,0,"div",45),o.Sb()),2&e){o.dc();const e=o.sc(60);o.Bb(1),o.jc("ngIf",e.errors.required)}}function C(e,t){1&e&&(o.Tb(0,"div"),o.Cc(1,"End Date is required"),o.Sb())}function B(e,t){if(1&e&&(o.Tb(0,"div",44),o.Ac(1,C,2,0,"div",45),o.Sb()),2&e){o.dc();const e=o.sc(68);o.Bb(1),o.jc("ngIf",e.errors.required)}}function I(e,t){1&e&&(o.Tb(0,"div"),o.Cc(1,"User is required"),o.Sb())}function w(e,t){if(1&e&&(o.Tb(0,"div",44),o.Ac(1,I,2,0,"div",45),o.Sb()),2&e){o.dc();const e=o.sc(77);o.Bb(1),o.jc("ngIf",e.errors.required)}}function D(e,t){if(1&e&&(o.Tb(0,"button",48),o.Cc(1),o.ec(2,"translate"),o.Sb()),2&e){const e=o.dc();o.jc("disabled",0==e.taskModal.status),o.Bb(1),o.Dc(o.fc(2,2,"btnAdd"))}}function E(e,t){if(1&e&&(o.Tb(0,"button",49),o.Cc(1),o.ec(2,"translate"),o.Sb()),2&e){const e=o.dc();o.jc("disabled",0==e.taskModal.status),o.Bb(1),o.Dc(o.fc(2,2,"btnUpdate"))}}const A=function(e){return{"is-invalid":e}},q=function(){return{dateInputFormat:"YYYY-MM-DD"}};let x=(()=>{class e{constructor(e,t,s,a,n,c,r,l,d){this.translate=e,this.router=t,this.taskService=s,this.projectService=a,this.modalService=n,this.parentTaskService=c,this.userService=r,this.spinner=l,this.route=d,this.lang="en",this.taskModal=new i,this.selectedTaskModal=new i,this.router.snapshot.params&&(this.lang=this.router.snapshot.params.lang,this.translate.setDefaultLang(this.lang),this.translate.use(this.lang))}ngOnInit(){this.spinner.show(),this.router.snapshot.params&&(this.selectedTaskId=this.router.snapshot.params.taskId,this.selectedTaskId&&this.fetchSelectedTaskById()),this.spinner.hide()}fetchSelectedTaskById(){this.taskService.getTaskById(this.selectedTaskId).subscribe(e=>{this.selectedTaskModal=e,console.log(e),this.fetchSelectedProject(e.projectId)})}fetchSelectedProject(e){this.projectService.getProjectsById(e).subscribe(e=>{this.selectedTaskModal.selectedProject=e,this.taskModal=this.selectedTaskModal})}onSubmit(){this.taskModal&&(this.taskModal.setParent?this.saveParentTask():this.saveTask())}saveParentTask(){this.spinner.show(),this.parentTaskService.saveParentTask({parentTask:this.taskModal.task}).subscribe(e=>{this.redirectAfterSave("Parent Task Saved successfully",()=>{this.reset()},"Success"),this.spinner.hide()},e=>{this.spinner.hide(),this.redirectAfterSave("Error occured..",()=>{},"Error")})}saveTask(){this.spinner.show(),this.taskModal&&this.taskModal.taskId?this.taskService.updateTask(this.taskModal).subscribe(e=>{this.redirectAfterSave("Task Updated successfully",()=>{this.reset()},"Success"),this.spinner.hide()},e=>{this.spinner.hide(),this.redirectAfterSave("Error occured ",()=>{},"Error")}):this.taskService.saveTask(this.taskModal).subscribe(e=>{this.redirectAfterSave("Task Saved successfully",()=>{this.reset(),this.route.navigate([this.lang+"/viewTask/"])},"Success"),this.spinner.hide()},e=>{this.spinner.hide(),this.redirectAfterSave("Error occured ",()=>{},"Error")})}redirectAfterSave(e,t,s){this.modalService.confirmOK(e,t,s)}searchProject(){this.spinner.show(),this.projectService.getProjects().subscribe(e=>{this.modelRef=this.modalService.openProjectSearchPopUp(e,"Search Project",e=>{this.searchedProject(e)},"Select"),this.spinner.hide()})}changeStartDate(e,t){}searchEmployee(){this.spinner.show(),this.userService.getUserList().subscribe(e=>{this.modelRef=this.modalService.openSearchPopUp(e,"Search Employee",e=>{this.selectedEmployee(e)},"Select"),this.spinner.hide()})}selectedEmployee(e){this.taskModal.selectedEmployee=e.selectedItem,this.modelRef.hide()}clearParentTask(){this.taskModal.selectedParentTask=(new i).selectedParentTask}searchedProject(e){this.taskModal.selectedProject=e.selectedItem,this.modelRef.hide()}searchParentTask(){this.spinner.show(),this.parentTaskService.getParentTasks().subscribe(e=>{this.modelRef=this.modalService.openParentTaskSearchPopUp(e,"Search Parent Task",e=>{this.selectedParentTask(e)},"Select"),this.spinner.hide()})}selectedParentTask(e){this.taskModal.selectedParentTask=e.selectedItem,this.taskModal.selectedParentTask.parentId=e.selectedItem.parentId,this.modelRef.hide()}reset(){this.taskForm.submitted=!1,this.taskModal=new i}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(b.d),o.Ob(c.a),o.Ob(u.d),o.Ob(u.b),o.Ob(h.a),o.Ob(u.a),o.Ob(u.c),o.Ob(k.c),o.Ob(c.b))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-add-task"]],viewQuery:function(e,t){var s;1&e&&o.Gc(p,!0),2&e&&o.rc(s=o.cc())&&(t.taskForm=s.first)},decls:94,vars:104,consts:[[1,"container","mt-3"],["name","form","novalidate","",3,"ngSubmit"],["taskForm","ngForm"],[1,"form-group","row"],["for","pwd",1,"control-label","col-sm-2"],[1,"col-sm-8"],["type","text","name","project",1,"form-control",3,"placeholder","ngModel","ngClass","readonly","required","ngModelChange"],["project","ngModel"],["class","error",4,"ngIf"],[1,"col-sm-2","m-0"],["type","button",1,"btn","btn-info","pull-right","m-1",3,"disabled","click"],["for","task",1,"control-label","col-sm-2"],[1,"col-sm-10"],["type","text","name","task","minlength","2","maxlength","199",1,"form-control",3,"ngModel","ngClass","required","ngModelChange"],["task","ngModel"],[1,"control-label","col-sm-2","col-md-2"],[1,"checkbox","col-sm-10","col-md-3"],["type","checkbox","name","setParent",3,"disabled","ngModel","ngModelChange"],["for","priority",1,"control-label","col-sm-2","col-md-2"],[1,"col-sm-9","col-md-9"],["type","range","name","priority",1,"custom-range",3,"ngModel","value","min","max","ngModelChange"],[1,"col-sm-1","col-md-1"],["for","pwd",1,"control-label","col-md-2","col-sm-2"],[1,"col-md-7","col-sm-7"],["type","text","name","selectedParentTask",1,"form-control",3,"placeholder","ngModel","ngClass","readonly","ngModelChange"],["selectedParentTask","ngModel"],[1,"col-md-3","col-sm-3","m-0"],[1,"row","ml-2"],["type","button",1,"btn","btn-info","pull-right",3,"disabled","click"],["type","button","class","btn btn-secondary pull-right ml-1",3,"disabled","click",4,"ngIf"],[1,"col-xs-6","col-md-4"],["type","text","name","startDate","bsDatepicker","","autocomplete","off","onkeydown","return false",1,"form-control",3,"ngModel","placeholder","bsConfig","isDisabled","required","ngModelChange","bsValueChange"],["startDate","ngModel"],["type","text","name","endDate","bsDatepicker","","onkeydown","return false","autocomplete","off",1,"form-control",3,"ngModel","placeholder","bsConfig","isDisabled","required","minDate","ngModelChange"],["endDate","ngModel"],["type","text","name","selectedEmployee",1,"form-control",3,"placeholder","ngModel","ngClass","readonly","required","ngModelChange"],["selectedEmployee","ngModel"],[1,"col-sm-2"],[1,"col-md-12"],["type","button","id","reset",1,"btn","btn-secondary","float-right","m-1",3,"disabled","click"],["type","submit","class","btn btn-primary float-right m-1","id","add",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-primary float-right m-1","id","update",3,"disabled",4,"ngIf"],["bdColor","rgba(51, 51, 51, 0.8)","size","default","type","ball-spin-clockwise"],[2,"color","white"],[1,"error"],[4,"ngIf"],[3,"hidden"],["type","button",1,"btn","btn-secondary","pull-right","ml-1",3,"disabled","click"],["type","submit","id","add",1,"btn","btn-primary","float-right","m-1",3,"disabled"],["type","submit","id","update",1,"btn","btn-primary","float-right","m-1",3,"disabled"]],template:function(e,t){if(1&e){const e=o.Ub();o.Tb(0,"div",0),o.Tb(1,"form",1,2),o.bc("ngSubmit",(function(){return o.uc(e),o.sc(2).form.valid&&t.onSubmit()})),o.Tb(3,"div",3),o.Tb(4,"label",4),o.Cc(5),o.ec(6,"translate"),o.Sb(),o.Tb(7,"div",5),o.Tb(8,"input",6,7),o.bc("ngModelChange",(function(e){return t.taskModal.selectedProject.project=e})),o.ec(10,"translate"),o.Sb(),o.Ac(11,g,2,1,"div",8),o.Sb(),o.Tb(12,"div",9),o.Tb(13,"button",10),o.bc("click",(function(){return t.searchProject()})),o.Cc(14),o.ec(15,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Tb(16,"div",3),o.Tb(17,"label",11),o.Cc(18),o.ec(19,"translate"),o.Sb(),o.Tb(20,"div",12),o.Tb(21,"input",13,14),o.bc("ngModelChange",(function(e){return t.taskModal.task=e})),o.Sb(),o.Ac(23,T,4,2,"div",8),o.Sb(),o.Sb(),o.Tb(24,"div",3),o.Pb(25,"label",15),o.Tb(26,"div",16),o.Tb(27,"label"),o.Tb(28,"input",17),o.bc("ngModelChange",(function(e){return t.taskModal.setParent=e})),o.Sb(),o.Cc(29),o.ec(30,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Tb(31,"div",3),o.Tb(32,"label",18),o.Cc(33),o.ec(34,"translate"),o.Sb(),o.Tb(35,"div",19),o.Tb(36,"input",20),o.bc("ngModelChange",(function(e){return t.taskModal.priority=e})),o.Sb(),o.Sb(),o.Tb(37,"div",21),o.Cc(38),o.Sb(),o.Sb(),o.Tb(39,"div",3),o.Tb(40,"label",22),o.Cc(41),o.ec(42,"translate"),o.Sb(),o.Tb(43,"div",23),o.Tb(44,"input",24,25),o.bc("ngModelChange",(function(e){return t.taskModal.selectedParentTask.parentTask=e})),o.ec(46,"translate"),o.Sb(),o.Ac(47,v,2,1,"div",8),o.Sb(),o.Tb(48,"div",26),o.Tb(49,"div",27),o.Tb(50,"button",28),o.bc("click",(function(){return t.searchParentTask()})),o.Cc(51),o.ec(52,"translate"),o.Sb(),o.Ac(53,P,3,4,"button",29),o.Sb(),o.Sb(),o.Sb(),o.Tb(54,"div",3),o.Tb(55,"label",15),o.Cc(56),o.ec(57,"translate"),o.Sb(),o.Tb(58,"div",30),o.Tb(59,"input",31,32),o.bc("ngModelChange",(function(e){return t.taskModal.startDate=e}))("bsValueChange",(function(e){return t.changeStartDate(e,"startDate")})),o.ec(61,"translate"),o.Sb(),o.Ac(62,j,2,1,"div",8),o.Sb(),o.Tb(63,"label",15),o.Cc(64),o.ec(65,"translate"),o.Sb(),o.Tb(66,"div",30),o.Tb(67,"input",33,34),o.bc("ngModelChange",(function(e){return t.taskModal.endDate=e})),o.ec(69,"translate"),o.Sb(),o.Ac(70,B,2,1,"div",8),o.Sb(),o.Sb(),o.Tb(71,"div",3),o.Tb(72,"label",4),o.Cc(73),o.ec(74,"translate"),o.Sb(),o.Tb(75,"div",5),o.Tb(76,"input",35,36),o.bc("ngModelChange",(function(e){return t.taskModal.selectedEmployee.firstName=e})),o.ec(78,"translate"),o.Sb(),o.Ac(79,w,2,1,"div",8),o.Sb(),o.Tb(80,"div",37),o.Tb(81,"button",10),o.bc("click",(function(){return t.searchEmployee()})),o.Cc(82),o.ec(83,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Tb(84,"div",3),o.Tb(85,"div",38),o.Tb(86,"button",39),o.bc("click",(function(){return t.reset()})),o.Cc(87),o.ec(88,"translate"),o.Sb(),o.Ac(89,D,3,4,"button",40),o.Ac(90,E,3,4,"button",41),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(91,"ngx-spinner",42),o.Tb(92,"p",43),o.Cc(93,"Please Wait. "),o.Sb(),o.Sb()}if(2&e){const e=o.sc(2),s=o.sc(9),a=o.sc(22),n=o.sc(45),c=o.sc(60),r=o.sc(68),l=o.sc(77);o.Bb(5),o.Ec("",o.fc(6,60,"lblProject"),":"),o.Bb(3),o.kc("placeholder",o.fc(10,62,"lblSearchProject")),o.jc("ngModel",t.taskModal.selectedProject.project)("ngClass",o.nc(94,A,e.submitted&&s.invalid))("readonly",!0)("required",!t.taskModal.setParent),o.Bb(3),o.jc("ngIf",e.submitted&&s.invalid),o.Bb(2),o.jc("disabled",t.taskModal.setParent||(null==t.taskModal?null:t.taskModal.taskId)),o.Bb(1),o.Dc(o.fc(15,64,"btnSearch")),o.Bb(4),o.Ec("",o.fc(19,66,"lblTask"),":"),o.Bb(3),o.jc("ngModel",t.taskModal.task)("ngClass",o.nc(96,A,e.submitted&&a.invalid))("required",!0),o.Bb(2),o.jc("ngIf",e.submitted&&a.invalid),o.Bb(5),o.jc("disabled",(null==t.taskModal||null==t.taskModal.selectedParentTask?null:t.taskModal.selectedParentTask.parentId)||(null==t.taskModal?null:t.taskModal.taskId))("ngModel",t.taskModal.setParent),o.Bb(1),o.Ec(" ",o.fc(30,68,"lblParentTask"),""),o.Bb(4),o.Ec("",o.fc(34,70,"btnPriority"),":"),o.Bb(3),o.jc("ngModel",t.taskModal.priority)("value",t.taskModal.priority)("min",0)("max",30),o.Bb(2),o.Ec(" ",t.taskModal.priority," "),o.Bb(3),o.Ec("",o.fc(42,72,"lblParentTask"),":"),o.Bb(3),o.kc("placeholder",o.fc(46,74,"lblSearchParentTask")),o.jc("ngModel",t.taskModal.selectedParentTask.parentTask)("ngClass",o.nc(98,A,e.submitted&&n.invalid))("readonly",!0),o.Bb(3),o.jc("ngIf",e.submitted&&n.invalid),o.Bb(3),o.jc("disabled",t.taskModal.setParent||0==t.taskModal.status),o.Bb(1),o.Ec("",o.fc(52,76,"btnSearch")," "),o.Bb(2),o.jc("ngIf",null==t.taskModal||null==t.taskModal.selectedParentTask?null:t.taskModal.selectedParentTask.parentId),o.Bb(3),o.Ec("",o.fc(57,78,"btnStartDate"),":"),o.Bb(3),o.kc("placeholder",o.fc(61,80,"lblStartDate")),o.jc("ngModel",t.taskModal.startDate)("bsConfig",o.mc(100,q))("isDisabled",t.taskModal.setParent)("required",!t.taskModal.setParent),o.Bb(3),o.jc("ngIf",e.submitted&&c.invalid),o.Bb(2),o.Ec("",o.fc(65,82,"btnEndDate"),":"),o.Bb(3),o.kc("placeholder",o.fc(69,84,"lblEndDate")),o.jc("ngModel",t.taskModal.endDate)("bsConfig",o.mc(101,q))("isDisabled",t.taskModal.setParent)("required",!t.taskModal.setParent)("minDate",t.taskModal.startDate),o.Bb(3),o.jc("ngIf",e.submitted&&r.invalid),o.Bb(3),o.Ec("",o.fc(74,86,"lblUser"),":"),o.Bb(3),o.kc("placeholder",o.fc(78,88,"lblSearchUser")),o.jc("ngModel",t.taskModal.selectedEmployee.firstName)("ngClass",o.nc(102,A,e.submitted&&l.invalid))("readonly",!0)("required",!t.taskModal.setParent),o.Bb(3),o.jc("ngIf",e.submitted&&l.invalid),o.Bb(2),o.jc("disabled",t.taskModal.setParent||(null==t.taskModal?null:t.taskModal.taskId)),o.Bb(1),o.Ec("",o.fc(83,90,"btnSearch")," "),o.Bb(4),o.jc("disabled",0==t.taskModal.status),o.Bb(1),o.Dc(o.fc(88,92,"btnReset")),o.Bb(2),o.jc("ngIf",null==(null==t.taskModal?null:t.taskModal.taskId)),o.Bb(1),o.jc("ngIf",null!=(null==t.taskModal?null:t.taskModal.taskId))}},directives:[n.p,n.i,n.j,n.b,n.h,n.k,a.j,n.o,a.l,n.e,n.d,n.a,n.m,f.b,f.a,k.a],pipes:[b.c],styles:[""]}),e})();const O=[{path:"",component:x},{path:":taskId",component:x}];let U=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(t){return new(t||e)},imports:[[c.e.forChild(O)],c.e]}),e})();var R=s("K3ix"),F=s("PCNd");let N=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(t){return new(t||e)},imports:[[a.c,R.c.forRoot(),k.b,F.a,n.c,b.b,U,f.c.forRoot()]]}),e})()}}]);